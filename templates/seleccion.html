<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<title>Coincidencias de búsqueda</title>
<style>
  body {
    font-family: 'Segoe UI', sans-serif;
    background: #F9FAFB;
    color: #333;
    margin: 0;
    padding: 30px;
  }
  header {
    display: flex;
    align-items: center;
    border-bottom: 3px solid #002C77;
    padding-bottom: 15px;
    margin-bottom: 25px;
  }
  header img {
    height: 50px;
    margin-right: 15px;
  }
  h1 { color: #002C77; margin: 0; }
  h2 { color: #333; margin-top: 0; }

  table {
    border-collapse: collapse;
    background: white;
    border-radius: 6px;
    box-shadow: 0 1px 6px rgba(0,0,0,0.1);
    width: 100%;
  }
  th, td { padding: 10px; border: 1px solid #ccc; text-align: left; }
  th { background: #E9ECF5; text-transform: uppercase; }
  tr:hover { background: #f4f6fc; }

  .estado {
    font-weight: bold;
    border-radius: 4px;
    padding: 3px 8px;
    color: white;
  }
  .disponible { background: green; }
  .prestado { background: #B00020; }

  button {
    padding: 8px 14px;
    border: none;
    border-radius: 4px;
    background: #0072CE;
    color: white;
    cursor: pointer;
    margin-top: 15px;
  }
  button:hover { background: #005BB5; }
</style>
</head>
<body>
  <header>
    <img src="https://red.pucp.edu.pe/riel/files/2019/07/LOGO-DE-PUCP.jpg" alt="PUCP">
    <h1>ALMACÉN DE ELECTRICIDAD Y ELECTRÓNICA</h1>
  </header>

  {% if mensaje %}
    <div style="background:#FFE5E5; color:#B00020; padding:15px; border-radius:6px;">
      <strong>{{ mensaje }}</strong>
    </div>
    <button onclick="window.location.href='/'">← Regresar</button>
  {% else %}
    <h2>Resultados para "{{ desc }}"</h2>
    <p>Seleccione un artículo para ver sus detalles:</p>

    <table>
      <thead>
        <tr>
          <th>CÓDIGO</th>
          <th>DESCRIPCIÓN</th>
          <th>LABORATORIO</th>
          <th>ESTADO</th>
          <th>N° PRÉSTAMOS</th>
        </tr>
      </thead>
      <tbody>
        {% for item in items %}
        <tr onclick="window.location.href='/' + encodeURIComponent('{{ item.Código }}')" style="cursor:pointer;">
          <td>{{ item.Código }}</td>
          <td>{{ item.Descripción }}</td>
          <td>{{ item.Laboratorio }}</td>
          <td>
            <span class="estado {{ 'disponible' if item.Estado == 'Disponible' else 'prestado' }}">
              {{ item.Estado }}
            </span>
          </td>
          <td>{{ item.Numero_prestamos }}</td>
        </tr>
        {% endfor %}
      </tbody>
    </table>

    <button onclick="window.location.href='/'">← Nueva búsqueda</button>
  {% endif %}
</body>
</html>
